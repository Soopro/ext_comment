(function(e){"use strict";if(typeof bootstrap==="function"){bootstrap("promise",e)}else if(typeof exports==="object"&&typeof module==="object"){module.exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else if(typeof ses!=="undefined"){if(!ses.ok()){return}else{ses.makeQ=e}}else if(typeof window!=="undefined"||typeof self!=="undefined"){var t=typeof window!=="undefined"?window:self;var n=t.Q;t.Q=e();t.Q.noConflict=function(){t.Q=n;return this}}else{throw new Error("This environment was not anticipated by Q. Please file a bug.")}})(function(){"use strict";var e=false;try{throw new Error}catch(t){e=!!t.stack}var n=E();var r;var o=function(){};var i=function(){var e={task:void 0,next:null};var t=e;var n=false;var r=void 0;var o=false;var u=[];function a(){var t,r;while(e.next){e=e.next;t=e.task;e.task=void 0;r=e.domain;if(r){e.domain=void 0;r.enter()}s(t,r)}while(u.length){t=u.pop();s(t)}n=false}function s(e,t){try{e()}catch(n){if(o){if(t){t.exit()}setTimeout(a,0);if(t){t.enter()}throw n}else{setTimeout(function(){throw n},0)}}if(t){t.exit()}}i=function(e){t=t.next={task:e,domain:o&&process.domain,next:null};if(!n){n=true;r()}};if(typeof process==="object"&&process.toString()==="[object process]"&&process.nextTick){o=true;r=function(){process.nextTick(a)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){r=setImmediate.bind(window,a)}else{r=function(){setImmediate(a)}}}else if(typeof MessageChannel!=="undefined"){var c=new MessageChannel;c.port1.onmessage=function(){r=f;c.port1.onmessage=a;a()};var f=function(){c.port2.postMessage(0)};r=function(){setTimeout(a,0);f()}}else{r=function(){setTimeout(a,0)}}i.runAfter=function(e){u.push(e);if(!n){n=true;r()}};return i}();var u=Function.call;function a(e){return function(){return u.apply(e,arguments)}}var s=a(Array.prototype.slice);var c=a(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1){do{if(n in this){t=this[n++];break}if(++n>=r){throw new TypeError}}while(1)}for(;n<r;n++){if(n in this){t=e(t,this[n],n)}}return t});var f=a(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++){if(this[t]===e){return t}}return-1});var p=a(Array.prototype.map||function(e,t){var n=this;var r=[];c(n,function(o,i,u){r.push(e.call(t,i,u,n))},void 0);return r});var l=Object.create||function(e){function t(){}t.prototype=e;return new t};var d=a(Object.prototype.hasOwnProperty);var h=Object.keys||function(e){var t=[];for(var n in e){if(d(e,n)){t.push(n)}}return t};var v=a(Object.prototype.toString);function y(e){return e===Object(e)}function m(e){return v(e)==="[object StopIteration]"||e instanceof g}var g;if(typeof ReturnValue!=="undefined"){g=ReturnValue}else{g=function(e){this.value=e}}var b="From previous event:";function k(t,n){if(e&&n.stack&&typeof t==="object"&&t!==null&&t.stack&&t.stack.indexOf(b)===-1){var r=[];for(var o=n;!!o;o=o.source){if(o.stack){r.unshift(o.stack)}}r.unshift(t.stack);var i=r.join("\n"+b+"\n");t.stack=w(i)}}function w(e){var t=e.split("\n");var n=[];for(var r=0;r<t.length;++r){var o=t[r];if(!R(o)&&!j(o)&&o){n.push(o)}}return n.join("\n")}function j(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function T(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t){return[t[1],Number(t[2])]}var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n){return[n[1],Number(n[2])]}var r=/.*@(.+):(\d+)$/.exec(e);if(r){return[r[1],Number(r[2])]}}function R(e){var t=T(e);if(!t){return false}var o=t[0];var i=t[1];return o===r&&i>=n&&i<=se}function E(){if(!e){return}try{throw new Error}catch(t){var n=t.stack.split("\n");var o=n[0].indexOf("@")>0?n[1]:n[2];var i=T(o);if(!i){return}r=i[0];return i[1]}}function C(e,t,n){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack)}return e.apply(e,arguments)}}function A(e){if(e instanceof U){return e}if(O(e)){return F(e)}else{return W(e)}}A.resolve=A;A.nextTick=i;A.longStackSupport=false;if(typeof process==="object"&&process&&process.env&&process.env.Q_DEBUG){A.longStackSupport=true}A.defer=x;function x(){var t=[],n=[],r;var o=l(x.prototype);var i=l(U.prototype);i.promiseDispatch=function(e,o,i){var u=s(arguments);if(t){t.push(u);if(o==="when"&&i[1]){n.push(i[1])}}else{A.nextTick(function(){r.promiseDispatch.apply(r,u)})}};i.valueOf=function(){if(t){return i}var e=N(r);if(D(e)){r=e}return e};i.inspect=function(){if(!r){return{state:"pending"}}return r.inspect()};if(A.longStackSupport&&e){try{throw new Error}catch(u){i.stack=u.stack.substring(u.stack.indexOf("\n")+1)}}function a(e){r=e;i.source=e;c(t,function(t,n){A.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0);t=void 0;n=void 0}o.promise=i;o.resolve=function(e){if(r){return}a(A(e))};o.fulfill=function(e){if(r){return}a(W(e))};o.reject=function(e){if(r){return}a(J(e))};o.notify=function(e){if(r){return}c(n,function(t,n){A.nextTick(function(){n(e)})},void 0)};return o}x.prototype.makeNodeResolver=function(){var e=this;return function(t,n){if(t){e.reject(t)}else if(arguments.length>2){e.resolve(s(arguments,1))}else{e.resolve(n)}}};A.Promise=S;A.promise=S;function S(e){if(typeof e!=="function"){throw new TypeError("resolver must be a function.")}var t=x();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}S.race=I;S.all=ne;S.reject=J;S.resolve=A;A.passByCopy=function(e){return e};U.prototype.passByCopy=function(){return this};A.join=function(e,t){return A(e).join(t)};U.prototype.join=function(e){return A([this,e]).spread(function(e,t){if(e===t){return e}else{throw new Error("Can't join: not the same: "+e+" "+t)}})};A.race=I;function I(e){return S(function(t,n){for(var r=0,o=e.length;r<o;r++){A(e[r]).then(t,n)}})}U.prototype.race=function(){return this.then(A.race)};A.makePromise=U;function U(e,t,n){if(t===void 0){t=function(e){return J(new Error("Promise does not support operation: "+e))}}if(n===void 0){n=function(){return{state:"unknown"}}}var r=l(U.prototype);r.promiseDispatch=function(n,o,i){var u;try{if(e[o]){u=e[o].apply(r,i)}else{u=t.call(r,o,i)}}catch(a){u=J(a)}if(n){n(u)}};r.inspect=n;if(n){var o=n();if(o.state==="rejected"){r.exception=o.reason}r.valueOf=function(){var e=n();if(e.state==="pending"||e.state==="rejected"){return r}return e.value}}return r}U.prototype.toString=function(){return"[object Promise]"};U.prototype.then=function(e,t,n){var r=this;var o=x();var i=false;function u(t){try{return typeof e==="function"?e(t):t}catch(n){return J(n)}}function a(e){if(typeof t==="function"){k(e,r);try{return t(e)}catch(n){return J(n)}}return J(e)}function s(e){return typeof n==="function"?n(e):e}A.nextTick(function(){r.promiseDispatch(function(e){if(i){return}i=true;o.resolve(u(e))},"when",[function(e){if(i){return}i=true;o.resolve(a(e))}])});r.promiseDispatch(void 0,"when",[void 0,function(e){var t;var n=false;try{t=s(e)}catch(r){n=true;if(A.onerror){A.onerror(r)}else{throw r}}if(!n){o.notify(t)}}]);return o.promise};A.tap=function(e,t){return A(e).tap(t)};U.prototype.tap=function(e){e=A(e);return this.then(function(t){return e.fcall(t).thenResolve(t)})};A.when=M;function M(e,t,n,r){return A(e).then(t,n,r)}U.prototype.thenResolve=function(e){return this.then(function(){return e})};A.thenResolve=function(e,t){return A(e).thenResolve(t)};U.prototype.thenReject=function(e){return this.then(function(){throw e})};A.thenReject=function(e,t){return A(e).thenReject(t)};A.nearer=N;function N(e){if(D(e)){var t=e.inspect();if(t.state==="fulfilled"){return t.value}}return e}A.isPromise=D;function D(e){return e instanceof U}A.isPromiseAlike=O;function O(e){return y(e)&&typeof e.then==="function"}A.isPending=G;function G(e){return D(e)&&e.inspect().state==="pending"}U.prototype.isPending=function(){return this.inspect().state==="pending"};A.isFulfilled=L;function L(e){return!D(e)||e.inspect().state==="fulfilled"}U.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};A.isRejected=Y;function Y(e){return D(e)&&e.inspect().state==="rejected"}U.prototype.isRejected=function(){return this.inspect().state==="rejected"};var Z=[];var Q=[];var H=[];var z=true;function P(){Z.length=0;Q.length=0;if(!z){z=true}}function V(e,t){if(!z){return}if(typeof process==="object"&&typeof process.emit==="function"){A.nextTick.runAfter(function(){if(f(Q,e)!==-1){process.emit("unhandledRejection",t,e);H.push(e)}})}Q.push(e);if(t&&typeof t.stack!=="undefined"){Z.push(t.stack)}else{Z.push("(no stack) "+t)}}function B(e){if(!z){return}var t=f(Q,e);if(t!==-1){if(typeof process==="object"&&typeof process.emit==="function"){A.nextTick.runAfter(function(){var n=f(H,e);if(n!==-1){process.emit("rejectionHandled",Z[t],e);H.splice(n,1)}})}Q.splice(t,1);Z.splice(t,1)}}A.resetUnhandledRejections=P;A.getUnhandledReasons=function(){return Z.slice()};A.stopUnhandledRejectionTracking=function(){P();z=false};P();A.reject=J;function J(e){var t=U({when:function(t){if(t){B(this)}return t?t(e):this}},function n(){return this},function r(){return{state:"rejected",reason:e}});V(t,e);return t}A.fulfill=W;function W(e){return U({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){if(t===null||t===void 0){return e.apply(void 0,n)}else{return e[t].apply(e,n)}},apply:function(t,n){return e.apply(t,n)},keys:function(){return h(e)}},void 0,function t(){return{state:"fulfilled",value:e}})}function F(e){var t=x();A.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}});return t.promise}A.master=q;function q(e){return U({isDef:function(){}},function t(n,r){return te(e,n,r)},function(){return A(e).inspect()})}A.spread=X;function X(e,t,n){return A(e).spread(t,n)}U.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)};A.async=_;function _(e){return function(){function t(e,t){var i;if(typeof StopIteration==="undefined"){try{i=n[e](t)}catch(u){return J(u)}if(i.done){return A(i.value)}else{return M(i.value,r,o)}}else{try{i=n[e](t)}catch(u){if(m(u)){return A(u.value)}else{return J(u)}}return M(i,r,o)}}var n=e.apply(this,arguments);var r=t.bind(t,"next");var o=t.bind(t,"throw");return r()}}A.spawn=K;function K(e){A.done(A.async(e)())}A["return"]=$;function $(e){throw new g(e)}A.promised=ee;function ee(e){return function(){return X([this,ne(arguments)],function(t,n){return e.apply(t,n)})}}A.dispatch=te;function te(e,t,n){return A(e).dispatch(t,n)}U.prototype.dispatch=function(e,t){var n=this;var r=x();A.nextTick(function(){n.promiseDispatch(r.resolve,e,t)});return r.promise};A.get=function(e,t){return A(e).dispatch("get",[t])};U.prototype.get=function(e){return this.dispatch("get",[e])};A.set=function(e,t,n){return A(e).dispatch("set",[t,n])};U.prototype.set=function(e,t){return this.dispatch("set",[e,t])};A.del=A["delete"]=function(e,t){return A(e).dispatch("delete",[t])};U.prototype.del=U.prototype["delete"]=function(e){return this.dispatch("delete",[e])};A.mapply=A.post=function(e,t,n){return A(e).dispatch("post",[t,n])};U.prototype.mapply=U.prototype.post=function(e,t){return this.dispatch("post",[e,t])};A.send=A.mcall=A.invoke=function(e,t){return A(e).dispatch("post",[t,s(arguments,2)])};U.prototype.send=U.prototype.mcall=U.prototype.invoke=function(e){return this.dispatch("post",[e,s(arguments,1)])};A.fapply=function(e,t){return A(e).dispatch("apply",[void 0,t])};U.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])};A["try"]=A.fcall=function(e){return A(e).dispatch("apply",[void 0,s(arguments,1)])};U.prototype.fcall=function(){return this.dispatch("apply",[void 0,s(arguments)])};A.fbind=function(e){var t=A(e);var n=s(arguments,1);return function r(){return t.dispatch("apply",[this,n.concat(s(arguments))])}};U.prototype.fbind=function(){var e=this;var t=s(arguments);return function n(){return e.dispatch("apply",[this,t.concat(s(arguments))])}};A.keys=function(e){return A(e).dispatch("keys",[])};U.prototype.keys=function(){return this.dispatch("keys",[])};A.all=ne;function ne(e){return M(e,function(e){var t=0;var n=x();c(e,function(r,o,i){var u;if(D(o)&&(u=o.inspect()).state==="fulfilled"){e[i]=u.value}else{++t;M(o,function(r){e[i]=r;if(--t===0){n.resolve(e)}},n.reject,function(e){n.notify({index:i,value:e})})}},void 0);if(t===0){n.resolve(e)}return n.promise})}U.prototype.all=function(){return ne(this)};A.any=re;function re(e){if(e.length===0){return A.resolve()}var t=A.defer();var n=0;c(e,function(r,o,i){var u=e[i];n++;M(u,a,s,c);function a(e){t.resolve(e)}function s(){n--;if(n===0){t.reject(new Error("Can't get fulfillment value from any promise, all "+"promises were rejected."))}}function c(e){t.notify({index:i,value:e})}},undefined);return t.promise}U.prototype.any=function(){return re(this)};A.allResolved=C(oe,"allResolved","allSettled");function oe(e){return M(e,function(e){e=p(e,A);return M(ne(p(e,function(e){return M(e,o,o)})),function(){return e})})}U.prototype.allResolved=function(){return oe(this)};A.allSettled=ie;function ie(e){return A(e).allSettled()}U.prototype.allSettled=function(){return this.then(function(e){return ne(p(e,function(e){e=A(e);function t(){return e.inspect()}return e.then(t,t)}))})};A.fail=A["catch"]=function(e,t){return A(e).then(void 0,t)};U.prototype.fail=U.prototype["catch"]=function(e){return this.then(void 0,e)};A.progress=ue;function ue(e,t){return A(e).then(void 0,void 0,t)}U.prototype.progress=function(e){return this.then(void 0,void 0,e)};A.fin=A["finally"]=function(e,t){return A(e)["finally"](t)};U.prototype.fin=U.prototype["finally"]=function(e){e=A(e);return this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})};A.done=function(e,t,n,r){return A(e).done(t,n,r)};U.prototype.done=function(e,t,n){var r=function(e){A.nextTick(function(){k(e,o);if(A.onerror){A.onerror(e)}else{throw e}})};var o=e||t||n?this.then(e,t,n):this;if(typeof process==="object"&&process&&process.domain){r=process.domain.bind(r)}o.then(void 0,r)};A.timeout=function(e,t,n){return A(e).timeout(t,n)};U.prototype.timeout=function(e,t){var n=x();var r=setTimeout(function(){if(!t||"string"===typeof t){t=new Error(t||"Timed out after "+e+" ms");t.code="ETIMEDOUT"}n.reject(t)},e);this.then(function(e){clearTimeout(r);n.resolve(e)},function(e){clearTimeout(r);n.reject(e)},n.notify);return n.promise};A.delay=function(e,t){if(t===void 0){t=e;e=void 0}return A(e).delay(t)};U.prototype.delay=function(e){return this.then(function(t){var n=x();setTimeout(function(){n.resolve(t)},e);return n.promise})};A.nfapply=function(e,t){return A(e).nfapply(t)};U.prototype.nfapply=function(e){var t=x();var n=s(e);n.push(t.makeNodeResolver());this.fapply(n).fail(t.reject);return t.promise};A.nfcall=function(e){var t=s(arguments,1);return A(e).nfapply(t)};U.prototype.nfcall=function(){var e=s(arguments);var t=x();e.push(t.makeNodeResolver());this.fapply(e).fail(t.reject);return t.promise};A.nfbind=A.denodeify=function(e){var t=s(arguments,1);return function(){var n=t.concat(s(arguments));var r=x();n.push(r.makeNodeResolver());A(e).fapply(n).fail(r.reject);return r.promise}};U.prototype.nfbind=U.prototype.denodeify=function(){var e=s(arguments);e.unshift(this);return A.denodeify.apply(void 0,e)};A.nbind=function(e,t){var n=s(arguments,2);return function(){var r=n.concat(s(arguments));var o=x();r.push(o.makeNodeResolver());function i(){return e.apply(t,arguments)}A(i).fapply(r).fail(o.reject);return o.promise}};U.prototype.nbind=function(){var e=s(arguments,0);e.unshift(this);return A.nbind.apply(void 0,e)};A.nmapply=A.npost=function(e,t,n){return A(e).npost(t,n)};U.prototype.nmapply=U.prototype.npost=function(e,t){var n=s(t||[]);var r=x();n.push(r.makeNodeResolver());this.dispatch("post",[e,n]).fail(r.reject);return r.promise};A.nsend=A.nmcall=A.ninvoke=function(e,t){var n=s(arguments,2);var r=x();n.push(r.makeNodeResolver());A(e).dispatch("post",[t,n]).fail(r.reject);return r.promise};U.prototype.nsend=U.prototype.nmcall=U.prototype.ninvoke=function(e){var t=s(arguments,1);var n=x();t.push(n.makeNodeResolver());this.dispatch("post",[e,t]).fail(n.reject);return n.promise};A.nodeify=ae;function ae(e,t){return A(e).nodeify(t)}U.prototype.nodeify=function(e){if(e){this.then(function(t){A.nextTick(function(){e(null,t)})},function(t){A.nextTick(function(){e(t)})})}else{return this}};A.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var se=E();return A});(function(){var e,t,n,r,o,i,u,a,s,c,f,p,l,d,h,v,y,m;p=typeof exports!=="undefined"&&exports!==null;h=p?exports:this;m="0.1.0";c="sup_member_auth";i="sup_member_open_id";u="sup_member_profile";a=h.Q.noConflict();y={url2key:function(e){var t;t=e.replace(/[\/\\]/gi,".");t=t.replace(/[\?&:#]/gi,"");return encodeURIComponent(t)},setParam:function(e,t){var n,r,o;e=encodeURIComponent(e);t=encodeURIComponent(t);o=document.location.search;n=e+"="+t;r=new RegExp("(&|\\?)"+e+"=[^&]*");o=o.replace(r,"$1"+n);if(!RegExp.$1){o+=(o.length>0?"&":"?")+n}document.location.search=o;return{key:e,value:t}},addParam:function(e,t){var n,r,o,i,u,a;if(typeof t!=="object"){return e}n=function(e,t,n){var r;r=e.indexOf("?")>-1?"&":"?";t=encodeURIComponent(t);n=encodeURIComponent(n);e=e+r+t+"="+n;return e};for(i in t){a=t[i];if(a!==null&&typeof a==="object"&&typeof a.length==="number"){for(o=0,u=a.length;o<u;o++){r=a[o];e=n(e,i,r)}}else{e=n(e,i,a)}}return e},getParam:function(e){var t,n,r,o,i,u;i={};o=window.location.search.substring(1);u=o.split("&");n=0;while(n<u.length){r=u[n].split("=");if(typeof i[r[0]]==="undefined"){i[r[0]]=decodeURIComponent(r[1])}else if(typeof i[r[0]]==="string"){t=[i[r[0]],decodeURIComponent(r[1])];i[r[0]]=t}else{i[r[0]].push(decodeURIComponent(r[1]))}n++}if(e){return i[e]}else{return i}}};f={apiExtURL:"http://api-comm.exts.soopro.net",contentType:"application/json",responseType:"json",withCredentials:false,expires:1e3*3600*24};h.SupExtComment=function(t){var n,r,o,a,s,p,l,d,h,g,b,k,w,j;w=f;for(h in t){j=t[h];w[h]=j}if(w.app_id){a=w.app_id}if(!a){l=document.documentElement;a=l.getAttribute("app")||l.dataset.app}if(!a){k=document.getElementsByTagName("meta");for(d=0,g=k.length;d<g;d++){b=k[d];if(b.getAttribute("name")==="app_id"){a=b.getAttribute("content");break}}}if(typeof a!=="string"||!a){throw"App not found!";return}n=new e;p=function(e,t,r){var o;if(typeof e.headers!=="object"){e.headers={}}e.headers["AppOpenId"]=a;o=n.send({type:e.type,url:e.url,params:e.params,data:e.data,contentType:e.contentType||w.contentType,responseType:e.responseType||w.responseType,withCredentials:e.withCredentials||w.withCredentials,headers:e.headers});if(typeof t==="function"){o.then(function(e){var n,r;try{t(e)}catch(r){n=r;console.error(n)}return e})}if(typeof r==="function"){o["catch"](function(e){var t,n;try{r(e)}catch(n){t=n;console.error(t)}return e})}return o};r=w.apiExtURL;o=r+"/comment/visit/group";s={query:function(e,t,n){var r,u;u=y.url2key(e.key);r=v.get(i);if(r){e.author_id=r}return p({url:o+"/"+u+"/entry",type:"GET",params:e},t,n)},get:function(e,t,n){var r,u;u=y.url2key(e.key);r=v.get(i);if(r){e.author_id=r}return p({url:o+"/"+u+"/entry/"+e.id,type:"GET",params:e},t,n)},add:function(e,t,n,r){var u;if(!t){t={}}t["author_id"]=v.get(i);t["author_token"]=v.get(c);u=y.url2key(e.key);return p({url:o+"/"+u+"/entry",data:t,type:"POST"},n,r)},remove:function(e,t,n){var r,u,a;a=y.url2key(e.key);r=v.get(i);u=v.get(c);if(r&&u){e.author_id=r;e.author_token=u}return p({url:o+"/"+a+"/entry/"+e.id,type:"DELETE",params:e},t,n)},author:{profile:function(){return v.get(u)},token:function(){return v.get(c)},open_id:function(){return v.get(i)}},utils:y,version:m};return s};t=new Error("Request API is invaild.");o=new Error("Request Type is invaild.");n=new Error("Request Data is invaild.");r=new Error("Request Param is invaild.");s=new Error("Resource Not Found.");e=function(){var e,t,n;t={get:function(t){return e("GET",t)},post:function(t){return e("POST",t)},update:function(t){return e("PUT",t)},remove:function(t){return e("DELETE",t)},send:function(t){return e(t.type,t)}};e=function(e,t){var r,o,i,u,s,c,f,p,l,d;d=new XMLHttpRequest;p=y.addParam(t.url,t.params);d.open(e,p||"",true);d.responseType=t.responseType;d.withCredentials=Boolean(t.withCredentials);d.setRequestHeader("Content-Type",t.contentType);d.setRequestHeader("X-Requested-With","XMLHttpRequest");if(typeof t.headers==="object"){c=t.headers;for(u in c){l=c[u];d.setRequestHeader(u,l)}}r=a.defer();s=function(e){var t;d=this;if(d.readyState===d.DONE){d.removeEventListener("readystatechange",s);t=n(d);if(d.status>=200&&d.status<399){r.resolve(t.data)}else{r.reject(t)}}};d.addEventListener("readystatechange",s);if(e==="GET"||e==="DELETE"){d.send()}else{try{f=JSON.stringify(t.data||{})}catch(i){o=i;throw o}d.send(f)}return r.promise};n=function(e,t){var n,r,o,i;if(e.responseType==="json"){n=e.response}else if((r=e.responseType)==="blob"||r==="arraybuffer"){n=e.response}else if(e.responseType==="document"){n=e.responseXML}else if((o=e.responseType)===""||o==="text"){n=e.responseText}i={data:n,headers:e.getAllResponseHeaders(),status:e.status,statusText:e.statusText,responseType:e.responseType,responseURL:e.responseURL};return i};return t};d=function(e){var t;if(e==="undefined"){return void 0}if(e==="null"){return null}try{e=JSON.parse(e)}catch(t){e=e}return e};l=function(e){if(typeof e==="object"){e=JSON.stringify(e)}return e};v={set:function(e,t,n,r,o){var i;t=l(t);i=new Date;i.setTime(i.getTime()+n);n=n?"expires="+i.toUTCString()+"; ":"";r=r?"path="+r+"; ":"path=/; ";o=o?"domain="+o+"; ":"";return document.cookie=e+"="+t+"; "+n+o+r},get:function(e){var t,n,r,o,i;o=e+"=";n=document.cookie.split(";");r=0;while(r<n.length){t=n[r];while(t.charAt(0)===" "){t=t.substring(1)}if(t.indexOf(o)===0){i=t.substring(o.length,t.length);return d(i)}r++}return null},remove:function(e){var t,n,r;n="expires=Thu, 01 Jan 1970 00:00:00 UTC; ";r=r?"path="+r+"; ":"path=/; ";t=t?"domain="+t+"; ":"";return document.cookie=e+"=; "+n+t+r}}}).call(this);(function(){var e,t,n,r,o,i,u,a,s,c,f,p,l,d,h,v,y,m,g,b,k,w,j,T,R,E,C,A;if(typeof document.querySelector!=="function"||typeof document.addEventListener!=="function"){console.log("SupExtComment: Your browser too old for this plugin.");return}if(typeof SupExtComment!=="function"){console.error("SupExtComment: not fully loaded!!");return}a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAIAAAC2BqGFAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTExIDc5LjE1ODMyNSwgMjAxNS8wOS8xMC0wMToxMDoyMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUU2NDczNjVGQjYwMTFFNUE2MkFDOUM5MDlDM0RFNjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUU2NDczNjZGQjYwMTFFNUE2MkFDOUM5MDlDM0RFNjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxRTY0NzM2M0ZCNjAxMUU1QTYyQUM5QzkwOUMzREU2MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxRTY0NzM2NEZCNjAxMUU1QTYyQUM5QzkwOUMzREU2MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pr8HBSkAAAO6SURBVHja7Nw/kyFBGAbwWZnMiphsiPyJTkYoZBN8BB/LR0CihEIyFykiJjMiNlOye27UbV3Z3cJ0T3fv9POEV3vdNT+v1jPT3S+Xy8Vh4s8LoQlNaIbQhCY0oQlNaIbQhCY0oQlNaIbQhCY0FQhNaIbQhI6YIAjW6/XhcDgej/v9/uPfXdfNZrO5XK5cLufzeUJHzOl0WiwWIIbv3T+GOLjr9frr6yuhH835fJ5Op8vlMsL/rdVqrVYrnU4T+k7gC2VYR24Byr1eDwVO6G8zHA6jFfKXpQ1uQn8xXIzH49VqJbHNarXa6XQMGUZShnzg0pURNIhmDbnAlCEjhnTlD2s0Tui/wQRO1rj83a8rurAdGkOzgopDFyLTmCRAC87knpqY2wuNe79YB42bAQTdWQo9n88T3J1B0JvNJsHdmQIdBMEjT4skBt2hU+ugtUy5fN+3saLVd7rb7ayD1jIH0Djx0Ab9/7uSZHdqyi24JSE0oQktJa7rWtKpZmgtr6s1viPXBq1lJUahULAOWstbas/zbKxoxV9kdKdxQZPOWYfiota70kMndKPRSHB3BkHju1yr1dT0hY70LsvTfMOiZp0cukBHVt8ZXtfJxd0LutC+Xkn/LTh+o2IdQDA0m7Dg0YhnHai4SqUSR8tott1um3CNpjxU6na70q3RIJo15AITu2wXI4YhtWwitBO+tBVcwcWF6I9GZGsFCrnZbHJrxRM5nU7z+RwF/sgbVdyMoIShzM1C0RMEge/7u90O4jfb38BaKBQ8z+P2N4bQhCY0Q2hCM4QmNKEZQhM6UnC3/f7+fl2gfzgcrg/zttvtzZ8Vi0UnfFyXy+WccCFSJpMx83GHKdBBGMjC9zPos8EHAHG458PYDo2y3Ww2vu9DNr79s6h3uHueVyqVNBa7BmjIrsMo3v7m/Dt6CVG/CE8d9FOHUSkQ/xVGWY2rgP4dRnzkjSMYVa7iPxsavrPZzIQSvlvgzWYzVu64oH8KsTJu+dAYi0ejkZkDxYODSbfblT52S4bGz91kMknAjdzb21u9XjcROo7z1PRG7mlucqChPBgMNG4Ajimu6/b7fSnWEqCTqizXWsIix+l0mlRlJ9ynL+XgK1HouE+tMyFSTs5LiZezY0HELzMl+FH/rFuSyMFlCn5xhaA1HlGkPoIXS+hHI3gIVErwC2UPtODMigejKAqhCU1ohtCEJjQJCE1ohtDGhst2CU1ohtCEJjShCU1ohtCEJjShCU1ohtCEJjShCU1ohtCEtjt/BBgAzHR+yWVd5VQAAAAASUVORK5CYII=";t=null;c=function(){var e;e=document.querySelector("#sup-ext-comment-plugin");if(!e){console.error("SupExtComment: no commment base element.")}return e};p=function(){var e,t;e=c();t=e.querySelector(".comm-list");if(!t){console.error("SupExtComment: no comment list.")}return t};f=function(){var e,t,n;e=c();n=window.location.hostname+location.pathname;t=e.getAttribute("group-key")||n;return t};s=function(e){var t,n;if(typeof e!=="string"){return""}n={"&":"&amp;","<":"&lt;",">":"&gt;"};t=function(e){return n[e]||e};return e.replace(/[&<>]/g,t)};j=function(e){var t,r,o,i,u,s,c;o=p();if(!o){return}if(e.meta&&e.meta.author_name){t=e.meta.author_avatar||a;r=e.meta.author_name;s='<img src="'+t+'" alt="'+r+'"/> <h5>'+r+"</h5>"}else{s="<h5>"+n("Anonymous")+"</h5>"}if(e.is_author){c='<a href="#rm" class="remove-comment">'+n("Remove")+"</a>"}else{c=""}u='<div class="author-container">'+s+'</div> <div class="comm-container"> <p>'+e.content+"</p>"+c+"</div>";i=document.createElement("div");i.innerHTML=u;if(e.is_author){i.dataset["entryId"]=e.id}i.className="comm-entry";o.appendChild(i);return i};T=function(e){var t,r,o,i;if(e){o='<img src="'+(e.avatar||a)+'" alt="'+e.name+'"/> <h5>'+e.name+"</h5>"}else{o="<h5>"+n("Anonymous")+"</h5>"}i="<header> <h3>"+n("Comments")+'</h3> </header> <form name="sup-exts-comment-form" class="comm-form"> <div class="author-container">'+o+'</div> <div class="input-container"> <div> <textarea class="comm-textarea" placeholder="'+n("Your Comment here...")+'" rows="6"></textarea> </div> <button class="submit-comment btn btn-default" type="submit">'+n("Write your Comment")+'</button> </div> </form> <hr> <div class="comm-list"></div>';t=document.createElement("div");t.innerHTML=i;r=c();r.appendChild(t);return t};o=[];u=function(e,t,n,r){o.push({node:e,event:t,hanlder:n,capture:r});e.addEventListener(t,n,r)};w=function(e,t){var n,r,i,u,a;a=[];for(r=n=0,i=o.length;n<i;r=++n){u=o[r];if(t===u.event&&e===u.node){e.removeEventListener(t,u.handler);a.push(r)}}o.splice(a,1)};b=function(){var e,t,n,r;for(t=e=0,n=o.length;e<n;t=++e){r=o[t];r.node.removeEventListener(r.event,r.handler)}o.length=0};d=null;E=function(e){var n,r,o,i,a,c;e.preventDefault();n=e.target;a=n.parentElement.querySelector(".comm-textarea");try{c=a.value.trim()}catch(o){c=null}c=s(c);if(d===c){return}else{d=c}if(c&&typeof c==="string"){i={key:f()};r={content:c};n.disabled=true;t.add(i,r).then(function(e){var t,n;t=j(e);n=t.querySelector(".remove-comment");return u(n,"click",k)})["catch"](function(e){return console.error(e)})["finally"](function(){return n.disabled=false})}return false};k=function(e){var n,r,o,i;e.preventDefault();n=e.target;if(n.hasAttribute("disabled")){return false}i=n.parentElement;r=null;while(true){if(i.className.indexOf("comm-entry")>-1){r=i;break}i=i.parentElement}if(!r){console.error("SupExtComment: entry not found.");return}o={key:f(),id:r.dataset["entryId"]};n.setAttribute("disabled",true);t.remove(o).then(function(e){w(n,"click");return r.parentElement.removeChild(r)})["catch"](function(e){return console.error(e)})["finally"](function(){return n.removeAttribute("disabled")});return false};l=function(){var e,n,r,o;R(v);r=c();if(!r){return}e=r.getAttribute("api-url");n=r.getAttribute("app-open-id");o={};if(e){o.apiExtURL=e}if(n){o.app_id=n}t=new SupExtComment(o);t.query({key:f()}).then(function(e){var n,o,i,a,s,c,f,p,l,d;n=t.author.profile();T(n);for(s=0,f=e.length;s<f;s++){i=e[s];j(i)}a=r.querySelector(".comm-form .submit-comment");u(a,"click",E);l=r.querySelectorAll(".remove-comment");d=[];for(c=0,p=l.length;c<p;c++){o=l[c];d.push(u(o,"click",k))}return d})["catch"](function(e){return console.error(e)})};document.addEventListener("DOMContentLoaded",l);v=null;y=document.querySelector('meta[name="locale"]');if(y){v=y.getAttrbutie("content")}if(!v){A=navigator.language||navigator.userLanguage;v=A.replace("-","_")}if(!v){v="en_US"}g={};m={};e=false;r=function(){var e,t,n;for(t=0,n=arguments.length;t<n;t++){e=arguments[t];if(typeof e!=="string"){return false}}return true};i=function(t){if(!e){return t.toLowerCase()}return t};h=function(e){var t,n,o,u;o={};if(Object.prototype.toString.call(e)==="[object Array]"){for(t=0,n=e.length;t<n;t++){u=e[t];if(r(u.msgid,u.msgid)&&u.msgid){o[i(u.msgid)]=u.msgstr}}}else if(e&&typeof e==="object"){o=e}return o};R=function(e){var t,n,r;if(!e){e=""}v=null;e=e.replace("-","_");for(t in m){r=m[t];if(t.toLowerCase()===e.toLowerCase()){v=t;break}}if(v&&m[v]){n=m[v]}else{n=null;v=e}g=h(n);return v};C=function(e){var t,n,r,o,u,a,s,c;if(!e||typeof e!=="string"){return e}c=g[i(e)];if(!c){c=e}n=[];for(r=0,u=arguments.length;r<u;r++){t=arguments[r];n.push(t)}s=n.slice(1);for(o=0,a=s.length;o<a;o++){t=s[o];if(t===void 0){t=""}c=c.replace("%s",t)}return c};n=C;m["zh_CN"]=[{msgid:"Comments",msgstr:"评论"},{msgid:"Your Comment here...",msgstr:"在这里写上您的评论..."},{msgid:"Anonymous",msgstr:"匿名"},{msgid:"Remove",msgstr:"移除"},{msgid:"Write your Comment",msgstr:"写下您的评论"}]}).call(this);
